import { Converter } from "csvtojson/src/Converter";
import P from "bluebird";
import { JSONResult } from "csvtojson/src/lineToJson";
import { CSVParseParam } from "csvtojson/src/Parameters";
import { ParseRuntime } from "csvtojson/src/ParseRuntime";

export abstract class Processor {
  protected params: CSVParseParam;
  protected runtime: ParseRuntime;
  constructor(protected converter: Converter) {
    this.params = converter.parseParam;
    this.runtime = converter.parseRuntime;
  }
  abstract process(chunk: Buffer,finalChunk?:boolean): P<ProcessLineResult[]>
  abstract destroy():P<void>;
  abstract flush(): P<ProcessLineResult[]>;
}
export type ProcessLineResult = string | string[] | JSONResult;
